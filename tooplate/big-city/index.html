<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/hero-slider-style.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/tooplate-style.css">
    <script src="js/jquery-1.11.3.min.js"></script>         <!-- jQuery (https://jquery.com/download/) -->
    <style>html,body{margin:0; padding:0; height:100%;} #vm_top_container{display:block; min-height:100%;} a{cursor:pointer}</style>
</head>
    <body>
        <!------------------------------------------------->
		<!-- contents and comunications with parent -->
		<div id=vm_top_container></div>
        <script>
			//------------------------------
			g_message=function(e){}; //will overwrited by content module
            $.ajaxSetup({cache:true});
			//------------------------------
			//load page content
			var page = window.location.href.split('&page=').pop();
            $('#vm_top_container').load('pages/'+page, function(){});
			//------------------------------
			//message from parent, call an overwrited function
            window.onmessage=function(e){
				g_message(e);
            };
			//------------------------------
			//ask parent to show source code of this module
            $('body').on('dblclick',function(){
                if(event.altKey){
                    var id=window.location.href.split('id=').pop().split('&')[0];
                    window.parent.postMessage({sandbox_id:'sandbox'+id,id:id,cmd:'source'},"*")
                }
            })
			//------------------------------
            var _height=0;
            $('body').on('mousemove',function(){
                var body=document.body, html=document.documentElement;
                var height=Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );
                if(_height!=height){
                    _height=height;
                    var id=window.location.href.split('id=').pop().split('&')[0];
                    window.parent.postMessage({sandbox_id:'sandbox'+id,id:id,cmd:'height',height:height},"*")
                }
            })
			//------------------------------
		</script>
		<!------------------------------------------------->
        <script src="js/tether.min.js"></script>                <!-- http://tether.io/ -->
        <script src="js/isInViewport.min.js"></script>          <!-- isInViewport js (https://github.com/zeusdeux/isInViewport) -->
        <script src="js/bootstrap.min.js"></script>             <!-- Bootstrap js (v4-alpha.getbootstrap.com/) -->
        <script src="js/hero-slider-main.js"></script>          <!-- Hero slider (https://codyhouse.co/gem/hero-slider/) -->
        <script src="js/jquery.magnific-popup.min.js"></script> <!-- Magnific popup (http://dimsemenov.com/plugins/magnific-popup/) -->
</body>
</html>
